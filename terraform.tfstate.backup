{
  "version": 4,
  "terraform_version": "1.12.2",
  "serial": 59,
  "lineage": "5fd04827-aa68-d42b-9056-3e2546784d34",
  "outputs": {},
  "resources": [
    {
      "module": "module.network",
      "mode": "data",
      "type": "azurerm_client_config",
      "name": "current",
      "provider": "module.network.provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "client_id": "04b07795-8ddb-461a-bbee-02f9e1bf7b46",
            "id": "Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9YWE0MTc3ZjctNTFmMC00OWQyLWJkNDgtOTc4YzA3OWZkMzFmO3N1YnNjcmlwdGlvbklkPTBhNDhjYjVhLTJhYjktNDYzYS1iMWQ3LWI0NDc4ZGYzODZjMTt0ZW5hbnRJZD0yMWQ1MmMwOS1iNzUzLTQzYTItODE5My04YWMyNTU1MmM2MGU=",
            "object_id": "aa4177f7-51f0-49d2-bd48-978c079fd31f",
            "subscription_id": "0a48cb5a-2ab9-463a-b1d7-b4478df386c1",
            "tenant_id": "21d52c09-b753-43a2-8193-8ac25552c60e",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "module": "module.network",
      "mode": "managed",
      "type": "azurerm_private_dns_zone",
      "name": "zones",
      "provider": "module.network.provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "index_key": "privatelink.azure-api.net",
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/0a48cb5a-2ab9-463a-b1d7-b4478df386c1/resourceGroups/rg-network-hub/providers/Microsoft.Network/privateDnsZones/privatelink.azure-api.net",
            "max_number_of_record_sets": 25000,
            "max_number_of_virtual_network_links": 1000,
            "max_number_of_virtual_network_links_with_registration": 100,
            "name": "privatelink.azure-api.net",
            "number_of_record_sets": 1,
            "resource_group_name": "rg-network-hub",
            "soa_record": [
              {
                "email": "azureprivatedns-host.microsoft.com",
                "expire_time": 2419200,
                "fqdn": "privatelink.azure-api.net.",
                "host_name": "azureprivatedns.net",
                "minimum_ttl": 10,
                "refresh_time": 3600,
                "retry_time": 300,
                "serial_number": 1,
                "tags": {},
                "ttl": 3600
              }
            ],
            "tags": {},
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.network.azurerm_resource_group.hub"
          ]
        },
        {
          "index_key": "privatelink.blob.core.windows.net",
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/0a48cb5a-2ab9-463a-b1d7-b4478df386c1/resourceGroups/rg-network-hub/providers/Microsoft.Network/privateDnsZones/privatelink.blob.core.windows.net",
            "max_number_of_record_sets": 25000,
            "max_number_of_virtual_network_links": 1000,
            "max_number_of_virtual_network_links_with_registration": 100,
            "name": "privatelink.blob.core.windows.net",
            "number_of_record_sets": 1,
            "resource_group_name": "rg-network-hub",
            "soa_record": [
              {
                "email": "azureprivatedns-host.microsoft.com",
                "expire_time": 2419200,
                "fqdn": "privatelink.blob.core.windows.net.",
                "host_name": "azureprivatedns.net",
                "minimum_ttl": 10,
                "refresh_time": 3600,
                "retry_time": 300,
                "serial_number": 1,
                "tags": {},
                "ttl": 3600
              }
            ],
            "tags": {},
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.network.azurerm_resource_group.hub"
          ]
        },
        {
          "index_key": "privatelink.openai.azure.com",
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/0a48cb5a-2ab9-463a-b1d7-b4478df386c1/resourceGroups/rg-network-hub/providers/Microsoft.Network/privateDnsZones/privatelink.openai.azure.com",
            "max_number_of_record_sets": 25000,
            "max_number_of_virtual_network_links": 1000,
            "max_number_of_virtual_network_links_with_registration": 100,
            "name": "privatelink.openai.azure.com",
            "number_of_record_sets": 1,
            "resource_group_name": "rg-network-hub",
            "soa_record": [
              {
                "email": "azureprivatedns-host.microsoft.com",
                "expire_time": 2419200,
                "fqdn": "privatelink.openai.azure.com.",
                "host_name": "azureprivatedns.net",
                "minimum_ttl": 10,
                "refresh_time": 3600,
                "retry_time": 300,
                "serial_number": 1,
                "tags": {},
                "ttl": 3600
              }
            ],
            "tags": {},
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.network.azurerm_resource_group.hub"
          ]
        }
      ]
    },
    {
      "module": "module.network",
      "mode": "managed",
      "type": "azurerm_resource_group",
      "name": "hub",
      "provider": "module.network.provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/0a48cb5a-2ab9-463a-b1d7-b4478df386c1/resourceGroups/rg-network-hub",
            "location": "centralus",
            "managed_by": "",
            "name": "rg-network-hub",
            "tags": {},
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjo1NDAwMDAwMDAwMDAwfX0="
        }
      ]
    },
    {
      "module": "module.network",
      "mode": "managed",
      "type": "azurerm_resource_group",
      "name": "spoke",
      "provider": "module.network.provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/0a48cb5a-2ab9-463a-b1d7-b4478df386c1/resourceGroups/rg-ai-spoke",
            "location": "eastus",
            "managed_by": "",
            "name": "rg-ai-spoke",
            "tags": {},
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjo1NDAwMDAwMDAwMDAwfX0="
        }
      ]
    },
    {
      "module": "module.org_guardrails",
      "mode": "data",
      "type": "azurerm_policy_definition",
      "name": "allowed_locations",
      "provider": "module.org_guardrails.provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "This policy enables you to restrict the locations your organization can specify when deploying resources. Use to enforce your geo-compliance requirements. Excludes resource groups, Microsoft.AzureActiveDirectory/b2cDirectories, and resources that use the 'global' region.",
            "display_name": "Allowed locations",
            "id": "/providers/Microsoft.Authorization/policyDefinitions/e56962a6-4747-49cd-b67b-bf8b01975c4c",
            "management_group_name": null,
            "metadata": "{\"category\":\"General\",\"version\":\"1.0.0\"}",
            "mode": "Indexed",
            "name": "e56962a6-4747-49cd-b67b-bf8b01975c4c",
            "parameters": "{\"listOfAllowedLocations\":{\"type\":\"Array\",\"metadata\":{\"description\":\"The list of locations that can be specified when deploying resources.\",\"displayName\":\"Allowed locations\",\"strongType\":\"location\"}}}",
            "policy_rule": "{\"if\":{\"allOf\":[{\"field\":\"location\",\"notIn\":\"[parameters('listOfAllowedLocations')]\"},{\"field\":\"location\",\"notEquals\":\"global\"},{\"field\":\"type\",\"notEquals\":\"Microsoft.AzureActiveDirectory/b2cDirectories\"}]},\"then\":{\"effect\":\"deny\"}}",
            "policy_type": "BuiltIn",
            "role_definition_ids": [],
            "timeouts": null,
            "type": "Microsoft.Authorization/policyDefinitions"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "module": "module.org_guardrails",
      "mode": "data",
      "type": "azurerm_policy_definition",
      "name": "require_tags",
      "provider": "module.org_guardrails.provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "Enforces existence of a tag. Does not apply to resource groups.",
            "display_name": "Require a tag on resources",
            "id": "/providers/Microsoft.Authorization/policyDefinitions/871b6d14-10aa-478d-b590-94f262ecfa99",
            "management_group_name": null,
            "metadata": "{\"category\":\"Tags\",\"version\":\"1.0.1\"}",
            "mode": "Indexed",
            "name": "871b6d14-10aa-478d-b590-94f262ecfa99",
            "parameters": "{\"tagName\":{\"type\":\"String\",\"metadata\":{\"description\":\"Name of the tag, such as 'environment'\",\"displayName\":\"Tag Name\"}}}",
            "policy_rule": "{\"if\":{\"exists\":\"false\",\"field\":\"[concat('tags[', parameters('tagName'), ']')]\"},\"then\":{\"effect\":\"deny\"}}",
            "policy_type": "BuiltIn",
            "role_definition_ids": [],
            "timeouts": null,
            "type": "Microsoft.Authorization/policyDefinitions"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "module": "module.org_guardrails",
      "mode": "managed",
      "type": "azurerm_management_group",
      "name": "org",
      "provider": "module.org_guardrails.provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "display_name": "mg-ai",
            "id": "/providers/Microsoft.Management/managementGroups/mg-ai",
            "name": "mg-ai",
            "parent_management_group_id": "/providers/Microsoft.Management/managementGroups/21d52c09-b753-43a2-8193-8ac25552c60e",
            "subscription_ids": [],
            "tenant_scoped_id": "/tenants/21d52c09-b753-43a2-8193-8ac25552c60e/providers/Microsoft.Management/managementGroups/mg-ai",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0="
        }
      ]
    },
    {
      "module": "module.org_guardrails",
      "mode": "managed",
      "type": "azurerm_management_group_policy_assignment",
      "name": "allowed_locations",
      "provider": "module.org_guardrails.provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "",
            "display_name": "",
            "enforce": true,
            "id": "/providers/Microsoft.Management/managementGroups/mg-ai/providers/Microsoft.Authorization/policyAssignments/allowed-locations",
            "identity": [],
            "location": "",
            "management_group_id": "/providers/Microsoft.Management/managementGroups/mg-ai",
            "metadata": "{\"assignedBy\":\"Terraform – org_guardrails module\",\"category\":\"General\",\"createdBy\":\"aa4177f7-51f0-49d2-bd48-978c079fd31f\",\"createdOn\":\"2025-08-06T16:25:23.1541058Z\",\"updatedBy\":null,\"updatedOn\":null}",
            "name": "allowed-locations",
            "non_compliance_message": [],
            "not_scopes": [],
            "overrides": [],
            "parameters": "{\"listOfAllowedLocations\":{\"value\":[]}}",
            "policy_definition_id": "/providers/Microsoft.Authorization/policyDefinitions/e56962a6-4747-49cd-b67b-bf8b01975c4c",
            "resource_selectors": [],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.org_guardrails.azurerm_management_group.org",
            "module.org_guardrails.data.azurerm_policy_definition.allowed_locations"
          ]
        }
      ]
    },
    {
      "module": "module.org_guardrails",
      "mode": "managed",
      "type": "azurerm_management_group_policy_assignment",
      "name": "require_tags",
      "provider": "module.org_guardrails.provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "",
            "display_name": "",
            "enforce": true,
            "id": "/providers/Microsoft.Management/managementGroups/mg-ai/providers/Microsoft.Authorization/policyAssignments/require-common-tags",
            "identity": [],
            "location": "",
            "management_group_id": "/providers/Microsoft.Management/managementGroups/mg-ai",
            "metadata": "{\"assignedBy\":\"Terraform – org_guardrails module\",\"category\":\"Tags\",\"createdBy\":\"aa4177f7-51f0-49d2-bd48-978c079fd31f\",\"createdOn\":\"2025-08-06T16:25:19.343685Z\",\"updatedBy\":null,\"updatedOn\":null}",
            "name": "require-common-tags",
            "non_compliance_message": [],
            "not_scopes": [],
            "overrides": [],
            "parameters": "{\"tagName\":{\"value\":\"environment\"}}",
            "policy_definition_id": "/providers/Microsoft.Authorization/policyDefinitions/871b6d14-10aa-478d-b590-94f262ecfa99",
            "resource_selectors": [],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.org_guardrails.azurerm_management_group.org",
            "module.org_guardrails.data.azurerm_policy_definition.require_tags"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
